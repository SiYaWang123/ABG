<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘¼å¸æ²»ç™‚ ABG åˆ¤è®€å¤§æŒ‘æˆ°</title>
    <style>
        :root {
            --primary: #00796b; /* é†«ç™‚ç¶  */
            --light: #e0f2f1;
            --accent: #d32f2f; /* è­¦ç¤ºç´… */
            --correct: #388e3c;
            --text: #333;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f4f4f9;
            color: var(--text);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            max-width: 600px;
            width: 100%;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: var(--primary);
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        .progress {
            text-align: center;
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 20px;
        }
        .case-card {
            background-color: var(--light);
            border-left: 5px solid var(--primary);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .case-desc {
            font-weight: bold;
            margin-bottom: 10px;
            line-height: 1.5;
        }
        .abg-values {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            background: white;
            padding: 10px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 1.1rem;
        }
        .value-item {
            display: flex;
            justify-content: space-between;
        }
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }
        button {
            padding: 12px;
            font-size: 1rem;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
        }
        button:active {
            transform: scale(0.98);
        }
        button.selected {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        .result-box {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }
        .result-box.correct {
            background-color: #e8f5e9;
            border: 1px solid var(--correct);
            color: var(--correct);
        }
        .result-box.wrong {
            background-color: #ffebee;
            border: 1px solid var(--accent);
            color: var(--accent);
        }
        .analysis {
            margin-top: 15px;
            color: #333;
            font-size: 0.95rem;
            line-height: 1.6;
        }
        .clinical-tip {
            margin-top: 15px;
            padding: 10px;
            background-color: #fff3e0;
            border-radius: 5px;
            border-left: 4px solid #ff9800;
            font-size: 0.9rem;
        }
        .next-btn {
            background-color: var(--primary);
            color: white;
            width: 100%;
            text-align: center;
            margin-top: 20px;
            font-weight: bold;
            display: none;
        }
        /* Make reference values toggleable */
        details {
            margin-bottom: 15px;
            font-size: 0.85rem;
            color: #555;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ« å‘¼å¸æ²»ç™‚ ABG åˆ¤è®€</h1>
    
    <details>
        <summary>é»æ­¤æŸ¥çœ‹åƒè€ƒæ­£å¸¸å€¼ (Reference)</summary>
        <ul style="margin-top:5px; padding-left: 20px;">
            <li>pH: 7.35 - 7.45</li>
            <li>PaCO2: 35 - 45 mmHg</li>
            <li>HCO3-: 22 - 26 mEq/L</li>
            <li>PaO2: 80 - 100 mmHg</li>
            <li>BE: -2 to +2</li>
        </ul>
    </details>

    <div class="progress" id="progressText">æº–å‚™é–‹å§‹...</div>

    <div class="case-card">
        <div class="case-desc" id="caseDesc">è¼‰å…¥ä¸­...</div>
        <div class="abg-values" id="abgValues">
            </div>
    </div>

    <h3 style="font-size: 1rem; margin-bottom: 10px;">è«‹é¸æ“‡æœ€æº–ç¢ºçš„åˆ¤è®€ï¼š</h3>
    <div class="options-grid" id="optionsContainer">
        </div>

    <div class="result-box" id="resultBox">
        <h3 id="resultTitle"></h3>
        <div class="analysis" id="resultAnalysis"></div>
        <div class="clinical-tip" id="clinicalTip"></div>
    </div>

    <button class="next-btn" id="nextBtn" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ â¡ï¸</button>
</div>

<script>
    // 15å€‹è‡¨åºŠæ¡ˆä¾‹è³‡æ–™åº«
    const cases = [
        {
            desc: "25æ­²å¥³æ€§ï¼Œå› éåº¦ç„¦æ…®è¢«é€è‡³æ€¥è¨ºï¼Œä¸»è¨´æ‰‹è…³ç™¼éº»ã€èƒ¸æ‚¶ï¼Œå‘¼å¸æ€¥ä¿ƒ (RR: 28/min)ã€‚",
            ph: "7.52", paco2: "28", hco3: "23", pao2: "105", be: "+1",
            correct: "å‘¼å¸æ€§é¹¼ä¸­æ¯’ (æœªä»£å„Ÿ)",
            analysis: "pH > 7.45 (é¹¼ä¸­æ¯’)ï¼ŒPaCO2 < 35 (å‘¼å¸æ€§)ï¼ŒHCO3- æ­£å¸¸ (è…è‡Ÿå°šæœªä»£å„Ÿ)ã€‚é€™æ˜¯å…¸å‹çš„æ€¥æ€§éåº¦æ›æ°£ã€‚",
            tip: "ğŸ’¡ è‡¨åºŠè™•ç½®ï¼šå®‰æ’«ç—…äººæƒ…ç·’ï¼Œå¼•å°æ”¾æ…¢å‘¼å¸ï¼Œå¿…è¦æ™‚ä½¿ç”¨é‡è¤‡å‘¼å¸é¢ç½© (Paper bag ç›®å‰è¼ƒå°‘å»ºè­°ï¼Œä¸»è¦ä»¥å¿ƒç†æ”¯æŒç‚ºä¸»)ã€‚æ’é™¤å…¶ä»–ç—…ç†åŸå› ï¼ˆå¦‚ PEï¼‰ã€‚"
        },
        {
            desc: "68æ­²ç”·æ€§ï¼ŒCOPD ç—…å²ï¼Œå› æ„è­˜ä¸æ¸…ã€å—œç¡è¢«å®¶å±¬é€é†«ã€‚æœªä½¿ç”¨å±…å®¶æ°§æ°£ã€‚",
            ph: "7.28", paco2: "65", hco3: "30", pao2: "50", be: "+4",
            correct: "å‘¼å¸æ€§é…¸ä¸­æ¯’ (éƒ¨åˆ†ä»£å„Ÿ)",
            analysis: "pH < 7.35 (é…¸ä¸­æ¯’)ï¼ŒPaCO2 > 45 (å‘¼å¸æ€§ç´¯ç©)ï¼ŒHCO3- > 26 (è…è‡Ÿè©¦åœ–ä¿ç•™é¹¼ä¾†ä»£å„Ÿï¼Œä½† pH ä»æœªå›æ­£)ã€‚",
            tip: "ğŸ’¡ è‡¨åºŠè™•ç½®ï¼šå…¸å‹çš„ Acute on Chronic RFã€‚å°å¿ƒçµ¦æ°§ (Target SpO2 88-92%) é¿å…æŠ‘åˆ¶å‘¼å¸é©…å‹•ã€‚å¯èƒ½éœ€è¦ BiPAP æˆ–æ’ç®¡æ²»ç™‚ã€‚"
        },
        {
            desc: "18æ­²ç”·æ€§ï¼Œç¬¬ä¸€å‹ç³–å°¿ç—…ç—…å²ï¼Œåœæ‰“èƒ°å³¶ç´ å…©å¤©ï¼Œå‡ºç¾å™å¿ƒã€å˜”åã€æ·±å¿«å‘¼å¸ (Kussmaul breathing)ã€‚",
            ph: "7.15", paco2: "22", hco3: "8", pao2: "95", be: "-18",
            correct: "ä»£è¬æ€§é…¸ä¸­æ¯’ (éƒ¨åˆ†ä»£å„Ÿ)",
            analysis: "pH < 7.35 (é…¸ä¸­æ¯’)ï¼ŒHCO3- æ¥µä½ (ä»£è¬æ€§)ï¼ŒPaCO2 < 35 (è‚ºéƒ¨éåº¦æ›æ°£è©¦åœ–ä»£å„Ÿæ’å‡º CO2)ã€‚",
            tip: "ğŸ’¡ è‡¨åºŠè™•ç½®ï¼šDKA (ç³–å°¿ç—…é…®é…¸ä¸­æ¯’)ã€‚é‡é»åœ¨è£œå……æ°´åˆ† (Hydration)ã€éœè„ˆè¼¸æ³¨èƒ°å³¶ç´ ã€ç›£æ¸¬é‰€é›¢å­ (K+)ã€‚"
        },
        {
            desc: "50æ­²å¥³æ€§ï¼Œåš´é‡å¹½é–€ç‹¹çª„å°è‡´åè¦†åŠ‡çƒˆå˜”åä¸‰å¤©ï¼Œè¦ºå¾—è™›å¼±ç„¡åŠ›ã€‚",
            ph: "7.55", paco2: "48", hco3: "40", pao2: "85", be: "+12",
            correct: "ä»£è¬æ€§é¹¼ä¸­æ¯’ (éƒ¨åˆ†ä»£å„Ÿ)",
            analysis: "pH > 7.45 (é¹¼ä¸­æ¯’)ï¼ŒHCO3- é¡¯è‘—å‡é«˜ (ä»£è¬æ€§ï¼Œå› å˜”åæµå¤±èƒƒé…¸ H+)ï¼ŒPaCO2 > 45 (è‚ºéƒ¨æ¸›æ…¢å‘¼å¸ä»¥ä¿ç•™ CO2 ä»£å„Ÿ)ã€‚",
            tip: "ğŸ’¡ è‡¨åºŠè™•ç½®ï¼šè£œå……æ°´åˆ†èˆ‡é›»è§£è³ª (Cl-, K+)ã€‚è©•ä¼°æ˜¯å¦éœ€è¦çµ¦äºˆ H2 blocker æˆ–è§£æ±ºé˜»å¡å•é¡Œã€‚"
        },
        {
            desc: "75æ­²ç”·æ€§ï¼ŒOHCA (åˆ°é™¢å‰å¿ƒè·³åœæ­¢)ï¼Œæ€¥è¨º CPR 15åˆ†é˜å¾ŒæŠ½è¡€ã€‚",
            ph: "6.90", paco2: "70", hco3: "10", pao2: "40", be: "-15",
            correct: "æ··åˆæ€§é…¸ä¸­æ¯’ (å‘¼å¸æ€§ + ä»£è¬æ€§)",
            analysis: "pH æ¥µä½ã€‚PaCO2 é«˜ (é€šæ°£ä¸è¶³/å‘¼å¸åœæ­¢) å°è‡´å‘¼é…¸ï¼›HCO3- ä½ (çµ„ç¹”ç¼ºæ°§ç„¡æ°§ä»£è¬ç”¢ç”Ÿä¹³é…¸) å°è‡´ä»£é…¸ã€‚å…©è€…åŒæ™‚å­˜åœ¨ã€‚",
            tip: "ğŸ’¡ è‡¨åºŠè™•ç½®ï¼šé«˜å“è³ª CPRï¼Œå»ºç«‹ç¢ºåˆ‡å‘¼å¸é“ (æ’ç®¡) æ”¹å–„é€šæ°£ï¼ŒROSC å¾Œéœ€ä½æº«ç™‚æ³•èˆ‡å¾ªç’°æ”¯æŒã€‚"
        },
        {
            desc: "40æ­²ç”·æ€§ï¼Œåš´é‡è‚ºç‚ä½µç™¼ ARDSï¼Œä½¿ç”¨å‘¼å¸å™¨ (PCV mode)ï¼Œè¨­å®šåƒæ•¸è¼ƒé«˜ã€‚",
            ph: "7.32", paco2: "55", hco3: "27", pao2: "60", be: "+2",
            correct: "å‘¼å¸æ€§é…¸ä¸­æ¯’ (æœªä»£å„Ÿ/è¼•å¾®ä»£å„Ÿ)",
            analysis: "pH é…¸ï¼ŒPaCO2 é«˜ã€‚æ­¤ç‚º Permissive Hypercapnia (å…è¨±æ€§é«˜ç¢³é…¸è¡€ç—‡) çš„å¸¸è¦‹è¡¨ç¾ï¼Œç‚ºäº†ä¿è­·è‚ºéƒ¨è€Œé™åˆ¶æ½®æ°£å®¹ç©ã€‚",
            tip: "ğŸ’¡ è‡¨åºŠè™•ç½®ï¼šè‹¥æ˜¯ ARDS ä¿è­·è‚ºç­–ç•¥ï¼ŒpH > 7.20-7.25 é€šå¸¸å¯æ¥å—ã€‚ä¸éœ€æ€¥è‘—èª¿é«˜ MVï¼Œå°ˆæ³¨æ–¼æ”¹å–„æ°§åˆèˆ‡æ²»ç™‚æ„ŸæŸ“ã€‚"
        },
        {
            desc: "30æ­²å¥³æ€§ï¼Œå»é«˜æµ·æ‹”åœ°å€ç™»å±± (3500m) ç¬¬ä¸‰å¤©ï¼Œç„¡æ˜é¡¯ä¸é©ã€‚",
            ph: "7.44", paco2: "30", hco3: "20", pao2: "65", be: "-4",
            correct: "å‘¼å¸æ€§é¹¼ä¸­æ¯’ (å®Œå…¨ä»£å„Ÿ)",
            analysis: "pH åœ¨æ­£å¸¸ç¯„åœ (7.44 åé¹¼)ã€‚PaCO2 ä½ (å› ç¼ºæ°§åˆºæ¿€æ›æ°£)ï¼ŒHCO3- ä½ (è…è‡Ÿå·²æ’å‡ºé¹¼ä¾†ä»£å„Ÿ)ã€‚",
            tip: "ğŸ’¡ è‡¨åºŠè™•ç½®ï¼šé€™æ˜¯æ­£å¸¸çš„é«˜å±±é©æ‡‰ç”Ÿç†åæ‡‰ (Chronic Resp Alkalosis)ã€‚è§€å¯Ÿ SaO2ï¼Œè‹¥ç„¡é«˜å±±ç—‡ç—‡ç‹€å¯æŒçºŒè§€å¯Ÿã€‚"
        },
        {
            desc: "55æ­²ç”·æ€§ï¼Œæ…¢æ€§è…è¡°ç«­ (CKD)ï¼Œæœªè¦å¾‹æ´—è…ï¼Œå‘¼å¸æ·±å¿«ã€‚",
            ph: "7.25", paco2: "30", hco3: "14", pao2: "90", be: "-10",
            correct: "ä»£è¬æ€§é…¸ä¸­æ¯’ (éƒ¨åˆ†ä»£å„Ÿ)",
            analysis: "pH é…¸ï¼ŒHCO3- ä½ (è…è‡Ÿç„¡æ³•æ’é…¸/å›æ”¶é¹¼)ï¼ŒPaCO2 ä½ (è‚ºéƒ¨ä»£å„Ÿ)ã€‚",
            tip: "ğŸ’¡ è‡¨åºŠè™•ç½®ï¼šç·Šæ€¥æ´—è… (Hemodialysis) æ˜¯çŸ¯æ­£é…¸é¹¼å¤±è¡¡èˆ‡é›»è§£è³ªç•°å¸¸çš„æœ€å¿«æ–¹æ³•ã€‚"
        },
        {
            desc: "22æ­²ç”·æ€§ï¼Œæµ·æ´›å› éé‡ (Heroin overdose)ï¼Œå‘¼å¸æ¯åˆ†é˜ 6 æ¬¡ã€‚",
            ph: "7.18", paco2: "75", hco3: "25", pao2: "55", be: "0",
            correct: "å‘¼å¸æ€§é…¸ä¸­æ¯’ (æœªä»£å„Ÿ)",
            analysis: "pH é…¸ï¼ŒPaCO2 æ¥µé«˜ (å‘¼å¸æŠ‘åˆ¶)ï¼ŒHCO3- æ­£å¸¸ (æ€¥æ€§ç™¼ç”Ÿï¼Œè…è‡Ÿä¾†ä¸åŠåæ‡‰)ã€‚",
            tip: "ğŸ’¡ è‡¨åºŠè™•ç½®ï¼šçµ¦äºˆè§£æ¯’åŠ‘ Naloxoneï¼Œçµ¦æ°§ï¼Œå¿…è¦æ™‚ BVM çµ¦æ°£æˆ–æ’ç®¡ä¿è­·å‘¼å¸é“ã€‚"
        },
        {
            desc: "60æ­²å¥³æ€§ï¼Œæ•—è¡€æ€§ä¼‘å…‹ (Septic Shock)ï¼Œè¡€å£“ä½ï¼Œä¹³é…¸ (Lactate) 8.0 mmol/Lã€‚",
            ph: "7.10", paco2: "25", hco3: "12", pao2: "80", be: "-16",
            correct: "ä»£è¬æ€§é…¸ä¸­æ¯’ (éƒ¨åˆ†ä»£å„Ÿ)",
            analysis: "pH ä½ï¼ŒHCO3- ä½ (ä¹³é…¸å †ç©æ¶ˆè€— HCO3-)ï¼ŒPaCO2 ä½ (å‘¼å¸ä»£å„Ÿ)ã€‚",
            tip: "ğŸ’¡ è‡¨åºŠè™•ç½®ï¼šFluid resuscitation (è¼¸æ¶²å¾©ç”¦)ï¼Œä½¿ç”¨å‡å£“åŠ‘ï¼Œå»£æ•ˆæŠ—ç”Ÿç´ ï¼Œå°‹æ‰¾æ„ŸæŸ“æºã€‚"
        },
        {
            desc: "45æ­²ç”·æ€§ï¼Œå¥åº·æª¢æŸ¥æŠ½è¡€ã€‚",
            ph: "7.40", paco2: "40", hco3: "24", pao2: "95", be: "0",
            correct: "æ­£å¸¸ ABG",
            analysis: "æ‰€æœ‰æ•¸å€¼çš†åœ¨æ­£å¸¸ç¯„åœå…§ã€‚",
            tip: "ğŸ’¡ è‡¨åºŠè™•ç½®ï¼šç„¡ï¼Œç¹¼çºŒä¿æŒå¥åº·ç”Ÿæ´»ï¼"
        },
        {
            desc: "70æ­²å¥³æ€§ï¼Œé•·æœŸä½¿ç”¨åˆ©å°¿åŠ‘ (Furosemide) æ²»ç™‚å¿ƒè¡°ç«­ã€‚",
            ph: "7.48", paco2: "46", hco3: "34", pao2: "92", be: "+8",
            correct: "ä»£è¬æ€§é¹¼ä¸­æ¯’ (éƒ¨åˆ†ä»£å„Ÿ/ä»£å„Ÿä¸­)",
            analysis: "pH é¹¼ï¼ŒHCO3- é«˜ (åˆ©å°¿åŠ‘å°è‡´ Cl- èˆ‡ H+ æµå¤±ï¼ŒContraction Alkalosis)ã€‚",
            tip: "ğŸ’¡ è‡¨åºŠè™•ç½®ï¼šèª¿æ•´åˆ©å°¿åŠ‘åŠ‘é‡ï¼Œè£œå…… KClï¼Œç›£æ¸¬é›»è§£è³ªèˆ‡å¿ƒè‡ŸåŠŸèƒ½ã€‚"
        },
        {
            desc: "50æ­²ç”·æ€§ï¼Œå‰›åšå®Œè…¹éƒ¨æ‰‹è¡“ï¼Œå‚·å£åŠ‡çƒˆç–¼ç—›ï¼Œå‘¼å¸æ·ºå¿«ã€‚",
            ph: "7.50", paco2: "31", hco3: "23", pao2: "94", be: "+1",
            correct: "å‘¼å¸æ€§é¹¼ä¸­æ¯’ (æœªä»£å„Ÿ)",
            analysis: "ç–¼ç—›åˆºæ¿€å‘¼å¸ä¸­æ¨å°è‡´éåº¦æ›æ°£ã€‚PaCO2 é™ä½ï¼ŒHCO3- å°šæ­£å¸¸ã€‚",
            tip: "ğŸ’¡ è‡¨åºŠè™•ç½®ï¼šçµ¦äºˆé©ç•¶æ­¢ç—›è—¥ç‰© (Analgesics)ï¼Œæ•™å°ä½¿ç”¨æŠ±æ•å’³å—½ (Splinting)ï¼Œæ’é™¤è¡“å¾Œä½µç™¼ç—‡ã€‚"
        },
        {
            desc: "65æ­²ç”·æ€§ï¼ŒCOPD ç—…å²ï¼Œå¹³æ—¥ PaCO2 ç´„ 55-60 mmHgï¼Œä»Šæ—¥å›è¨ºã€‚",
            ph: "7.38", paco2: "58", hco3: "33", pao2: "62", be: "+7",
            correct: "å‘¼å¸æ€§é…¸ä¸­æ¯’ (å®Œå…¨ä»£å„Ÿ)",
            analysis: "pH æ­£å¸¸ (7.38 åé…¸)ï¼ŒPaCO2 é«˜ï¼ŒHCO3- é«˜ã€‚é€™æ˜¯æ…¢æ€§é«˜ç¢³é…¸è¡€ç—‡çš„å…¸å‹è¡¨ç¾ã€‚",
            tip: "ğŸ’¡ è‡¨åºŠè™•ç½®ï¼šæ­¤ç‚ºç—…äºº Baselineï¼Œä¸éœ€éåº¦çŸ¯æ­£ PaCO2ã€‚ç¶­æŒç¾æœ‰æ²»ç™‚ï¼Œé¼“å‹µæˆ’è¸èˆ‡å¾©å¥ã€‚"
        },
        {
            desc: "28æ­²å¥³æ€§ï¼Œæ‡·å­• 32 é€±ï¼Œè¦ºå¾—å‘¼å¸ç¨å¾®è²»åŠ›ã€‚",
            ph: "7.46", paco2: "30", hco3: "20", pao2: "102", be: "-3",
            correct: "å‘¼å¸æ€§é¹¼ä¸­æ¯’ (æ…¢æ€§/ä»£å„Ÿä¸­ - å­•æœŸç”Ÿç†æ€§)",
            analysis: "å­•æœŸé»ƒé«”ç´  (Progesterone) åˆºæ¿€å‘¼å¸ä¸­æ¨ï¼Œå°è‡´ç”Ÿç†æ€§éåº¦æ›æ°£ã€‚é€šå¸¸ pH ç¨é«˜æˆ–æ­£å¸¸åé«˜ã€‚",
            tip: "ğŸ’¡ è‡¨åºŠè™•ç½®ï¼šå­•æœŸæ­£å¸¸ç”Ÿç†è®ŠåŒ– (Physiological Hyperventilation)ï¼Œé€šå¸¸ä¸éœ€æ²»ç™‚ï¼Œå‘å­•å©¦è¡›æ•™è§£é‡‹å³å¯ã€‚"
        }
    ];

    // é¸é …åˆ—è¡¨
    const options = [
        "æ­£å¸¸ ABG",
        "å‘¼å¸æ€§é…¸ä¸­æ¯’ (æœªä»£å„Ÿ)",
        "å‘¼å¸æ€§é…¸ä¸­æ¯’ (éƒ¨åˆ†ä»£å„Ÿ)",
        "å‘¼å¸æ€§é…¸ä¸­æ¯’ (å®Œå…¨ä»£å„Ÿ)",
        "å‘¼å¸æ€§é¹¼ä¸­æ¯’ (æœªä»£å„Ÿ)",
        "å‘¼å¸æ€§é¹¼ä¸­æ¯’ (éƒ¨åˆ†ä»£å„Ÿ)",
        "å‘¼å¸æ€§é¹¼ä¸­æ¯’ (å®Œå…¨ä»£å„Ÿ)",
        "ä»£è¬æ€§é…¸ä¸­æ¯’ (æœªä»£å„Ÿ)",
        "ä»£è¬æ€§é…¸ä¸­æ¯’ (éƒ¨åˆ†ä»£å„Ÿ)",
        "ä»£è¬æ€§é…¸ä¸­æ¯’ (å®Œå…¨ä»£å„Ÿ)",
        "ä»£è¬æ€§é¹¼ä¸­æ¯’ (æœªä»£å„Ÿ)",
        "ä»£è¬æ€§é¹¼ä¸­æ¯’ (éƒ¨åˆ†ä»£å„Ÿ)",
        "æ··åˆæ€§é…¸ä¸­æ¯’ (å‘¼å¸æ€§ + ä»£è¬æ€§)"
    ];

    let currentCaseIndex = 0;
    let shuffledCases = [];

    // åˆå§‹åŒ–
    function init() {
        // éš¨æ©Ÿæ‰“äº‚é¡Œç›®é †åº
        shuffledCases = [...cases].sort(() => Math.random() - 0.5);
        loadQuestion();
    }

    function loadQuestion() {
        // é‡ç½® UI
        document.getElementById('resultBox').style.display = 'none';
        document.getElementById('nextBtn').style.display = 'none';
        document.getElementById('optionsContainer').innerHTML = '';
        
        // æª¢æŸ¥æ˜¯å¦åšå®Œ
        if (currentCaseIndex >= shuffledCases.length) {
            finishGame();
            return;
        }

        const currentCase = shuffledCases[currentCaseIndex];
        
        // æ›´æ–°é€²åº¦èˆ‡é¡Œç›®
        document.getElementById('progressText').innerText = `Case: ${currentCaseIndex + 1} / ${shuffledCases.length}`;
        document.getElementById('caseDesc').innerText = currentCase.desc;
        
        // å¡«å…¥ ABG æ•¸å€¼
        document.getElementById('abgValues').innerHTML = `
            <div class="value-item"><span>pH:</span> <span>${currentCase.ph}</span></div>
            <div class="value-item"><span>PaCO2:</span> <span>${currentCase.paco2}</span></div>
            <div class="value-item"><span>PaO2:</span> <span>${currentCase.pao2}</span></div>
            <div class="value-item"><span>HCO3-:</span> <span>${currentCase.hco3}</span></div>
            <div class="value-item"><span>BE:</span> <span>${currentCase.be}</span></div>
        `;

        // ç”Ÿæˆé¸é …æŒ‰éˆ• (æ‰“äº‚é †åºï¼Œä½†å¿…é ˆåŒ…å«æ­£ç¢ºç­”æ¡ˆ)
        // ç‚ºäº†è®“é¸é …ä¸è¦å¤ªå¤šå¤ªé›œï¼Œæˆ‘å€‘æ¯æ¬¡å– 4-5 å€‹é¸é …ï¼Œå…¶ä¸­å¿…å«æ­£ç¢ºç­”æ¡ˆ
        let choicePool = options.filter(opt => opt !== currentCase.correct);
        choicePool = choicePool.sort(() => Math.random() - 0.5).slice(0, 3); // éš¨æ©Ÿå–3å€‹éŒ¯èª¤é¸é …
        choicePool.push(currentCase.correct); // åŠ å…¥æ­£ç¢ºé¸é …
        choicePool.sort(() => Math.random() - 0.5); // å†æ¬¡æ‰“äº‚

        const optionsHtml = choicePool.map(opt => 
            `<button onclick="checkAnswer(this, '${opt}')">${opt}</button>`
        ).join('');
        
        document.getElementById('optionsContainer').innerHTML = optionsHtml;
    }

    function checkAnswer(btn, selectedOption) {
        // é–å®šæ‰€æœ‰æŒ‰éˆ•
        const buttons = document.querySelectorAll('#optionsContainer button');
        buttons.forEach(b => b.disabled = true);

        const currentCase = shuffledCases[currentCaseIndex];
        const resultBox = document.getElementById('resultBox');
        const resultTitle = document.getElementById('resultTitle');
        const resultAnalysis = document.getElementById('resultAnalysis');
        const clinicalTip = document.getElementById('clinicalTip');

        // æ¨™è¨˜é¸æ“‡çš„æŒ‰éˆ•
        btn.classList.add('selected');

        resultBox.style.display = 'block';
        
        if (selectedOption === currentCase.correct) {
            resultBox.className = 'result-box correct';
            resultTitle.innerText = "âœ… ç­”å°äº†ï¼";
        } else {
            resultBox.className = 'result-box wrong';
            resultTitle.innerText = `âŒ ç­”éŒ¯äº†... æ­£è§£æ˜¯ï¼š${currentCase.correct}`;
        }

        resultAnalysis.innerHTML = `<strong>è§£æï¼š</strong>${currentCase.analysis}`;
        clinicalTip.innerText = currentCase.tip;

        document.getElementById('nextBtn').style.display = 'block';
    }

    function nextQuestion() {
        currentCaseIndex++;
        loadQuestion();
    }

    function finishGame() {
        document.querySelector('.container').innerHTML = `
            <h1>ğŸ‰ ç·´ç¿’çµæŸï¼</h1>
            <p style="text-align:center; margin: 20px 0;">æ‚¨å·²ç¶“å®Œæˆäº†æ‰€æœ‰éš¨æ©Ÿæ¡ˆä¾‹ç·´ç¿’ã€‚</p>
            <button class="next-btn" style="display:block" onclick="location.reload()">é‡æ–°æŒ‘æˆ° ğŸ”„</button>
        `;
    }

    // å•Ÿå‹•
    init();

</script>

</body>
</html>